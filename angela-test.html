<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>ZIM Frame - Fit Template</title>

<!-- Welcome to ZIM at https://zimjs.com - Code Creativity!              	        -->
<!-- ZIM runs on the HTML Canvas powered by JavaScript and CreateJS https://createjs.com -->
<!-- Founded by Inventor Dan Zen - http://danzen.com - Canadian New Media Award Winner 	-->
<!-- ZIM is free to use. You can donate to help improve ZIM at http://zimjs.com/donate 	-->

<script src="https://d309knd7es5f10.cloudfront.net/createjs_1.1_min.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/zim_9.3.0.js"></script>
<!-- use zimjs.com/distill for minified individual functions! -->

<script>
// SCALING OPTIONS
// scaling can have values as follows with full being the default
// "fit"	sets canvas and stage to dimensions and scales to fit inside window size
// "outside"	sets canvas and stage to dimensions and scales to fit outside window size
// "full"	sets stage to window size with no scaling
// "tagID"	add canvas to HTML tag of ID - set to dimensions if provided - no scaling
var scaling = "fit"; // this will resize to fit inside the screen dimensions
var width = 1024;
var height = 768;
var color = light; // ZIM colors like green, blue, pink, faint, clear, etc. available globally
var outerColor = dark;
var assets = ["background.png", "first.png","beam.png","bottom-clouds.png","stars.png","second.png","star.png","third.png", "star-power.png", "lightningorange1.png", "unicorn-distance.png",
"friend.png","heart.png","boss-distance.png"];
var path = "assets/"
var frame = new Frame(scaling, width, height, color, outerColor, assets, path, new Waiter());
frame.on("ready", function() {
    zog("ready from ZIM Frame"); // logs in console (F12 - choose console)
    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;

frame.asset("background.png").scaleTo(stage,100).addTo();

var bottomClouds = frame.asset("bottom-clouds.png").center();
var scrollerClouds = new Scroller(bottomClouds,.45);
var stars = frame.asset("stars.png").center();
var scrollerStars = new Scroller(stars,.25);
var skyBeam = frame.asset("beam.png").center();
var scrollerBeam = new Scroller(skyBeam,.95);
var unicont = new Container(120,50).centerReg();
var starPower = frame.asset("star-power.png")
var star = frame.asset("star.png")
var unicorn = frame.asset("first.png").sca(.5).centerReg(unicont).outline();
//emitter attached to the unicorn
var emit =  new Emitter({
   obj:[star.sca(.09),new Rectangle(10), new Circle(10)],
   random:{color:[blue, moon, pink,yellow]},
   angle:{min:10, max:80},
   force:1
}).center(unicorn).pos(440,410).rot(60)
.addTo(unicont).bot().sca(1.75);
// var unicorn = frame.asset("second.png").centerReg(unicont);
//The function for the unicorn to 'evolve'. For now, the unicorn evolves once you click it. But we want it so that
//when the score reaches 50 (first time it evolves) score 100(final evolution), it will change automatically.
unicorn.tap(function(){
  unicorn.removeFrom(unicont);
  var unicorng = frame.asset("second.png").sca(.5).centerReg(unicont).outline();
  stage.update();
  unicorng.tap(function(){
    unicorng.removeFrom(unicont);
    var unicorn3 = frame.asset("third.png").sca(.5).centerReg(unicont).outline();
    stage.update();
  })
})
var lightning1 = frame.asset("lightningorange1.png")
starPower.centerReg().pos(60,60).sca(0.15).outline().animate({props:{scale:0.18}, time:500, loop:true, rewind:true, from:true});
lightning1.centerReg().pos(60,60).sca(0.15).outline().animate({props:{scale:0.18}, time:500, loop:true, rewind:true, from:true});
//motion controller for the unicorn container.
var mcontroller = new MotionController({
target:unicont,
type:"mousemove",
speed:100,
damp:.2,
minPercentSpeed:-6000,
maxPercentSpeed:6000
});
//scores. When the unicorn container hits the starPower, the score increases by 10.
var count = 0;
var scoreCont = new Container(100,30).centerReg(stage).pos(860,30);
var score = new Label({text:count,color:white}).addTo(scoreCont).center().mov(0,50);
var scoreLabel = new Label({
  text:"YOUR SCORE",
  size:20,
  font:"arial",
  color:moon,
  backgroundColor:pink,
  corner:10
}).addTo(scoreCont).center();
//When the unicorn container hits the starPower, the score increases by 10.
stage.on("stagemousemove", function() {
   if (unicont.hitTestBounds(starPower)){
      zog("zogging");
      stage.removeChild(starPower);
      count+=10;
      score.text=count;
      stage.update();
    }
});

stage.on("stagemousemove", function() {
   if (unicont.hitTestBounds(lightning1)){
      zog("zogging");
      stage.removeChild(lightning1);
      heartCont.removeChild(heart1);
      score.text=count;
      stage.update();
    }
});
//score

//hearts assets. from right to left: heart 1 heart 2 heart 3
var heartCont = new Container(100,30).centerReg();
var heart1 = new Sprite (frame.asset("heart.png")).sca(0.09).centerReg().mov(70,0).addTo(heartCont)
var heart2 = new Sprite(frame.asset("heart.png")).sca(0.09).centerReg().addTo(heartCont)
var heart3 = new Sprite (frame.asset("heart.png")).sca(0.09).centerReg().mov(-70,0).addTo(heartCont)
heartCont.pos(100,50);

var trackerbox = new Container().pos({x:stageW-750, y: stageH-100});
var tracker = frame.asset("unicorn-distance.png").sca(.15);

var runner = new Slider({
  min: 0,
  max: 3000,
  button: tracker,
  barLength: 500,
  barColor: pink
}).center(trackerbox);






stage.update(); // this is needed to show any changes
}); // end of ready
</script>

<meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>
</html>
